<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Rusty Robot Dashboard</title>
    <link rel="stylesheet" href="/static/pico.min.css" />
  </head>
  <body>
    <main class="container">
      <h1>ðŸ¤– Rusty Robot</h1>
      <p>Welcome to the control panel.</p>

      <section>
        <h3>Camera</h3>
        <img
          id="camera"
          src="/camera/frame.jpg"
          hx-get="/partials/camera"
          hx-trigger="every 1000ms"
          hx-on::after-request="this.src = event.detail.xhr.responseText;"
          hx-swap="none"
          hx-target="this"
        />
      </section>
      <section>
        <h3>Sensors</h3>
        <div
          id="sensor-panel"
          hx-get="/partials/sensors"
          hx-trigger="load, every 1s"
          hx-swap="innerHTML"
        >
          Loading sensorsâ€¦
        </div>
      </section>

      <section>
        <h3>Motor controls</h3>
        <button hx-post="/api/motor/forward">Forward</button>
        <button hx-post="/api/motor/backward">Backward</button>
        <button hx-post="/api/motor/stop">Stop</button>
        <button hx-post="/api/motor/left">Left</button>
        <button hx-post="/api/motor/right">Right</button>
      </section>

      <section>
        <h3>Servo controls</h3>
        <button hx-post="/api/servo/up">Up</button>
        <button hx-post="/api/servo/down">Down</button>
      </section>

      <section>
        <h3>HTMX time from the server</h3>
        <p hx-trigger="load, every 1s" hx-get="/time">...</p>
      </section>
    </main>

    <script src="/static/htmx.min.js"></script>
  </body>
</html>
